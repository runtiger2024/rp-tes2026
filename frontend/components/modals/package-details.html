<div
  class="modal-content animate-pop-in"
  style="
    max-width: 700px;
    width: 95%;
    max-height: 90vh;
    overflow-y: auto;
    border-radius: 20px;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
  "
>
  <div
    class="modal-header"
    style="padding: 20px 25px; border-bottom: 1px solid #f1f5f9"
  >
    <h3
      style="
        margin: 0;
        font-weight: 800;
        color: #1e293b;
        display: flex;
        align-items: center;
      "
    >
      <i
        class="fas fa-box-open"
        style="color: #1a73e8; margin-right: 12px; font-size: 24px"
      ></i
      >包裹詳情
    </h3>
    <span
      class="modal-close"
      onclick="window.modalManager.close()"
      style="cursor: pointer; font-size: 24px; color: #94a3b8"
      >&times;</span
    >
  </div>

  <div class="modal-body" style="padding: 25px">
    <div
      style="
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-bottom: 25px;
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        padding: 20px;
        border-radius: 16px;
        border: 1px solid #e2e8f0;
      "
    >
      <div style="text-align: center; border-right: 1px solid #e2e8f0">
        <label
          style="
            display: block;
            font-size: 12px;
            color: #64748b;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
          "
          >總重量 (Weight)</label
        >
        <span style="font-size: 24px; font-weight: 900; color: #1a73e8">
          <span id="details-total-weight">0.0</span>
          <small style="font-size: 14px">kg</small>
        </span>
      </div>
      <div style="text-align: center">
        <label
          style="
            display: block;
            font-size: 12px;
            color: #64748b;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
          "
          >預估運費 (Est. Fee)</label
        >
        <span
          id="details-total-fee"
          style="font-size: 24px; font-weight: 900; color: #d32f2f"
          >NT$ 0</span
        >
      </div>
    </div>

    <div id="details-boxes-list-section" style="margin-bottom: 25px">
      <h4
        style="
          font-size: 15px;
          color: #1e293b;
          margin-bottom: 12px;
          display: flex;
          align-items: center;
          gap: 8px;
        "
      >
        <i class="fas fa-layer-group" style="color: #64748b"></i> 倉儲細節
      </h4>
      <div
        id="details-boxes-list"
        style="display: flex; flex-direction: column; gap: 10px"
      ></div>
    </div>

    <div style="margin-top: 10px">
      <h4
        style="
          margin-bottom: 15px;
          font-size: 15px;
          color: #1e293b;
          display: flex;
          align-items: center;
          gap: 8px;
        "
      >
        <i class="fas fa-camera-retro" style="color: #1a73e8"></i> 倉庫入庫照片
        (Warehouse Photos)
      </h4>
      <div
        id="details-images-gallery"
        style="
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
          gap: 12px;
          background: #fff;
          padding: 15px;
          border: 1px solid #e2e8f0;
          border-radius: 12px;
          min-height: 100px;
        "
      >
        <div
          id="no-images-placeholder"
          style="
            grid-column: 1/-1;
            text-align: center;
            color: #94a3b8;
            padding: 20px;
          "
        >
          <i
            class="fas fa-image"
            style="font-size: 30px; display: block; margin-bottom: 10px"
          ></i>
          尚未上傳實拍照片
        </div>
      </div>
    </div>
  </div>

  <div
    class="modal-footer"
    style="
      padding: 20px 25px;
      border-top: 1px solid #f1f5f9;
      text-align: right;
      background: #f8fafc;
    "
  >
    <button
      onclick="window.modalManager.close()"
      style="
        padding: 10px 25px;
        background: #fff;
        border: 1px solid #e2e8f0;
        border-radius: 10px;
        color: #475569;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
      "
      onmouseover="this.style.background='#f1f5f9'"
      onmouseout="this.style.background='#fff'"
    >
      關閉詳情
    </button>
  </div>
</div>

<style>
  /* 深度還原：詳情彈窗專用微型動畫與樣式 */
  .mini-box-item {
    display: flex;
    justify-content: space-between;
    padding: 12px 15px;
    background: #fff;
    border: 1px solid #e2e8f0;
    border-radius: 10px;
    font-size: 14px;
    transition: border-color 0.2s;
  }
  .mini-box-item:hover {
    border-color: #1a73e8;
  }
  .warehouse-img-thumb {
    width: 100%;
    aspect-ratio: 1/1;
    object-fit: cover;
    border-radius: 8px;
    cursor: zoom-in;
    border: 1px solid #f1f5f9;
    transition: transform 0.2s;
  }
  .warehouse-img-thumb:hover {
    transform: scale(1.03);
  }
</style>

<script>
  /**
   * 深度還原：點擊圖片放大邏輯 (可選)
   * 原始功能：點擊縮圖後在另一個彈窗或全螢幕展示
   */
  document
    .getElementById("details-images-gallery")
    .addEventListener("click", function (e) {
      if (e.target.tagName === "IMG") {
        window.open(e.target.src, "_blank");
      }
    });
</script>
